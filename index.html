<html>

<head>

    <title>JIRA bookmarklets</title>

</head>

<body>

<ol>
    <li>Drag-and-Drop following bookmarklet to your bookmarks</li>
    <li>Switch to JIRA environment</li>
    <li>Click on bookmarklet from your bookmarks</li>
</ol>

<a href="javascript:(function(){$(&quot;&lt;style&gt;@media all{.featherlight{display:none;position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483647;text-align:center;white-space:nowrap;cursor:pointer;background:#333;background:rgba(0,0,0,0)}.featherlight:last-of-type{background:rgba(0,0,0,.8)}.featherlight:before{content:'';display:inline-block;height:100%;vertical-align:middle}.featherlight .featherlight-content{position:relative;text-align:left;vertical-align:middle;display:inline-block;overflow:auto;padding:25px 25px 0;border-bottom:25px solid transparent;margin-left:5%;margin-right:5%;max-height:95%;background:#fff;cursor:auto;white-space:normal}.featherlight .featherlight-inner{display:block}.featherlight .featherlight-close-icon{position:absolute;z-index:9999;top:0;right:0;line-height:25px;width:25px;cursor:pointer;text-align:center;font-family:Arial,sans-serif;background:#fff;background:rgba(255,255,255,.3);color:#000;border:0;padding:0}.featherlight .featherlight-close-icon::-moz-focus-inner{border:0;padding:0}.featherlight .featherlight-image{width:100%}.featherlight-iframe .featherlight-content{border-bottom:0;padding:0;-webkit-overflow-scrolling:touch;overflow-y:scroll}.featherlight iframe{border:0}.featherlight *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}}@media only screen and (max-width:1024px){.featherlight .featherlight-content{margin-left:0;margin-right:0;max-height:98%;padding:10px 10px 0;border-bottom:10px solid transparent}} .tool-error {color:red} .tool-success {color:green} &lt;/style&gt;&quot;).appendTo(&quot;head&quot;);!function(a){&quot;use strict&quot;;function b(a,c){if(!(this instanceof b)){var d=new b(a,c);return d.open(),d}this.id=b.id++,this.setup(a,c),this.chainCallbacks(b._callbackChain)}function c(a,b){var c={};for(var d in a)d in b&amp;&amp;(c[d]=a[d],delete a[d]);return c}function d(a,b){var c={},d=new RegExp(&quot;^&quot;+b+&quot;([A-Z])(.*)&quot;);for(var e in a){var f=e.match(d);if(f){var g=(f[1]+f[2].replace(/([A-Z])/g,&quot;-$1&quot;)).toLowerCase();c[g]=a[e]}}return c}if(&quot;undefined&quot;==typeof a)return void(&quot;console&quot;in window&amp;&amp;window.console.info(&quot;Too much lightness, Featherlight needs jQuery.&quot;));var e=[],f=function(b){return e=a.grep(e,function(a){return a!==b&amp;&amp;a.$instance.closest(&quot;body&quot;).length&gt;0})},g={allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,name:1,referrerpolicy:1,scrolling:1,sandbox:1,src:1,srcdoc:1,width:1},h={keyup:&quot;onKeyUp&quot;,resize:&quot;onResize&quot;},i=function(c){a.each(b.opened().reverse(),function(){return c.isDefaultPrevented()||!1!==this[h[c.type]](c)?void 0:(c.preventDefault(),c.stopPropagation(),!1)})},j=function(c){if(c!==b._globalHandlerInstalled){b._globalHandlerInstalled=c;var d=a.map(h,function(a,c){return c+&quot;.&quot;+b.prototype.namespace}).join(&quot; &quot;);a(window)[c?&quot;on&quot;:&quot;off&quot;](d,i)}};b.prototype={constructor:b,namespace:&quot;featherlight&quot;,targetAttr:&quot;data-featherlight&quot;,variant:null,resetCss:!1,background:null,openTrigger:&quot;click&quot;,closeTrigger:&quot;click&quot;,filter:null,root:&quot;body&quot;,openSpeed:250,closeSpeed:250,closeOnClick:&quot;background&quot;,closeOnEsc:!0,closeIcon:&quot;&amp;#10005;&quot;,loading:&quot;&quot;,persist:!1,otherClose:null,beforeOpen:a.noop,beforeContent:a.noop,beforeClose:a.noop,afterOpen:a.noop,afterContent:a.noop,afterClose:a.noop,onKeyUp:a.noop,onResize:a.noop,type:null,contentFilters:[&quot;jquery&quot;,&quot;image&quot;,&quot;html&quot;,&quot;ajax&quot;,&quot;iframe&quot;,&quot;text&quot;],setup:function(b,c){&quot;object&quot;!=typeof b||b instanceof a!=!1||c||(c=b,b=void 0);var d=a.extend(this,c,{target:b}),e=d.resetCss?d.namespace+&quot;-reset&quot;:d.namespace,f=a(d.background||['&lt;div class=&quot;'+e+&quot;-loading &quot;+e+'&quot;&gt;','&lt;div class=&quot;'+e+'-content&quot;&gt;','&lt;button class=&quot;'+e+&quot;-close-icon &quot;+d.namespace+'-close&quot; aria-label=&quot;Close&quot;&gt;',d.closeIcon,&quot;&lt;/button&gt;&quot;,'&lt;div class=&quot;'+d.namespace+'-inner&quot;&gt;'+d.loading+&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;,&quot;&lt;/div&gt;&quot;].join(&quot;&quot;)),g=&quot;.&quot;+d.namespace+&quot;-close&quot;+(d.otherClose?&quot;,&quot;+d.otherClose:&quot;&quot;);return d.$instance=f.clone().addClass(d.variant),d.$instance.on(d.closeTrigger+&quot;.&quot;+d.namespace,function(b){var c=a(b.target);(&quot;background&quot;===d.closeOnClick&amp;&amp;c.is(&quot;.&quot;+d.namespace)||&quot;anywhere&quot;===d.closeOnClick||c.closest(g).length)&amp;&amp;(d.close(b),b.preventDefault())}),this},getContent:function(){if(this.persist!==!1&amp;&amp;this.$content)return this.$content;var b=this,c=this.constructor.contentFilters,d=function(a){return b.$currentTarget&amp;&amp;b.$currentTarget.attr(a)},e=d(b.targetAttr),f=b.target||e||&quot;&quot;,g=c[b.type];if(!g&amp;&amp;f in c&amp;&amp;(g=c[f],f=b.target&amp;&amp;e),f=f||d(&quot;href&quot;)||&quot;&quot;,!g)for(var h in c)b[h]&amp;&amp;(g=c[h],f=b[h]);if(!g){var i=f;if(f=null,a.each(b.contentFilters,function(){return g=c[this],g.test&amp;&amp;(f=g.test(i)),!f&amp;&amp;g.regex&amp;&amp;i.match&amp;&amp;i.match(g.regex)&amp;&amp;(f=i),!f}),!f)return&quot;console&quot;in window&amp;&amp;window.console.error(&quot;Featherlight: no content filter found &quot;+(i?' for &quot;'+i+'&quot;':&quot; (no target specified)&quot;)),!1}return g.process.call(b,f)},setContent:function(b){var c=this;return(b.is(&quot;iframe&quot;)||a(&quot;iframe&quot;,b).length&gt;0)&amp;&amp;c.$instance.addClass(c.namespace+&quot;-iframe&quot;),c.$instance.removeClass(c.namespace+&quot;-loading&quot;),c.$instance.find(&quot;.&quot;+c.namespace+&quot;-inner&quot;).not(b).slice(1).remove().end().replaceWith(a.contains(c.$instance[0],b[0])?&quot;&quot;:b),c.$content=b.addClass(c.namespace+&quot;-inner&quot;),c},open:function(b){var c=this;if(c.$instance.hide().appendTo(c.root),!(b&amp;&amp;b.isDefaultPrevented()||c.beforeOpen(b)===!1)){b&amp;&amp;b.preventDefault();var d=c.getContent();if(d)return e.push(c),j(!0),c.$instance.fadeIn(c.openSpeed),c.beforeContent(b),a.when(d).always(function(a){c.setContent(a),c.afterContent(b)}).then(c.$instance.promise()).done(function(){c.afterOpen(b)})}return c.$instance.detach(),a.Deferred().reject().promise()},close:function(b){var c=this,d=a.Deferred();return c.beforeClose(b)===!1?d.reject():(0===f(c).length&amp;&amp;j(!1),c.$instance.fadeOut(c.closeSpeed,function(){c.$instance.detach(),c.afterClose(b),d.resolve()})),d.promise()},resize:function(a,b){if(a&amp;&amp;b){this.$content.css(&quot;width&quot;,&quot;&quot;).css(&quot;height&quot;,&quot;&quot;);var c=Math.max(a/(parseInt(this.$content.parent().css(&quot;width&quot;),10)-1),b/(parseInt(this.$content.parent().css(&quot;height&quot;),10)-1));c&gt;1&amp;&amp;(c=b/Math.floor(b/c),this.$content.css(&quot;width&quot;,&quot;&quot;+a/c+&quot;px&quot;).css(&quot;height&quot;,&quot;&quot;+b/c+&quot;px&quot;))}},chainCallbacks:function(b){for(var c in b)this[c]=a.proxy(b[c],this,a.proxy(this[c],this))}},a.extend(b,{id:0,autoBind:&quot;[data-featherlight]&quot;,defaults:b.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(b){return b instanceof a&amp;&amp;b},process:function(b){return this.persist!==!1?a(b):a(b).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff|bmp|svg)(\?\S*)?$/i,process:function(b){var c=this,d=a.Deferred(),e=new Image,f=a('&lt;img src=&quot;'+b+'&quot; alt=&quot;&quot; class=&quot;'+c.namespace+'-image&quot; /&gt;');return e.onload=function(){f.naturalWidth=e.width,f.naturalHeight=e.height,d.resolve(f)},e.onerror=function(){d.reject(f)},e.src=b,d.promise()}},html:{regex:/^\s*&lt;[\w!][^&lt;]*&gt;/,process:function(b){return a(b)}},ajax:{regex:/./,process:function(b){var c=a.Deferred(),d=a(&quot;&lt;div&gt;&lt;/div&gt;&quot;).load(b,function(a,b){&quot;error&quot;!==b&amp;&amp;c.resolve(d.contents()),c.fail()});return c.promise()}},iframe:{process:function(b){var e=new a.Deferred,f=a(&quot;&lt;iframe/&gt;&quot;),h=d(this,&quot;iframe&quot;),i=c(h,g);return f.hide().attr(&quot;src&quot;,b).attr(i).css(h).on(&quot;load&quot;,function(){e.resolve(f.show())}).appendTo(this.$instance.find(&quot;.&quot;+this.namespace+&quot;-content&quot;)),e.promise()}},text:{process:function(b){return a(&quot;&lt;div&gt;&quot;,{text:b})}}},functionAttributes:[&quot;beforeOpen&quot;,&quot;afterOpen&quot;,&quot;beforeContent&quot;,&quot;afterContent&quot;,&quot;beforeClose&quot;,&quot;afterClose&quot;],readElementConfig:function(b,c){var d=this,e=new RegExp(&quot;^data-&quot;+c+&quot;-(.*)&quot;),f={};return b&amp;&amp;b.attributes&amp;&amp;a.each(b.attributes,function(){var b=this.name.match(e);if(b){var c=this.value,g=a.camelCase(b[1]);if(a.inArray(g,d.functionAttributes)&gt;=0)c=new Function(c);else try{c=JSON.parse(c)}catch(h){}f[g]=c}}),f},extend:function(b,c){var d=function(){this.constructor=b};return d.prototype=this.prototype,b.prototype=new d,b.__super__=this.prototype,a.extend(b,this,c),b.defaults=b.prototype,b},attach:function(b,c,d){var e=this;&quot;object&quot;!=typeof c||c instanceof a!=!1||d||(d=c,c=void 0),d=a.extend({},d);var f,g=d.namespace||e.defaults.namespace,h=a.extend({},e.defaults,e.readElementConfig(b[0],g),d);return b.on(h.openTrigger+&quot;.&quot;+h.namespace,h.filter,function(g){var i=a.extend({$source:b,$currentTarget:a(this)},e.readElementConfig(b[0],h.namespace),e.readElementConfig(this,h.namespace),d),j=f||a(this).data(&quot;featherlight-persisted&quot;)||new e(c,i);&quot;shared&quot;===j.persist?f=j:j.persist!==!1&amp;&amp;a(this).data(&quot;featherlight-persisted&quot;,j),i.$currentTarget.blur(),j.open(g)}),b},current:function(){var a=this.opened();return a[a.length-1]||null},opened:function(){var b=this;return f(),a.grep(e,function(a){return a instanceof b})},close:function(a){var b=this.current();return b?b.close(a):void 0},_onReady:function(){var b=this;b.autoBind&amp;&amp;(a(b.autoBind).each(function(){b.attach(a(this))}),a(document).on(&quot;click&quot;,b.autoBind,function(c){c.isDefaultPrevented()||&quot;featherlight&quot;===c.namespace||(c.preventDefault(),b.attach(a(c.currentTarget)),a(c.target).trigger(&quot;click.featherlight&quot;))}))},_callbackChain:{onKeyUp:function(b,c){return 27===c.keyCode?(this.closeOnEsc&amp;&amp;a.featherlight.close(c),!1):b(c)},beforeOpen:function(b,c){return this._previouslyActive=document.activeElement,this._$previouslyTabbable=a(&quot;a, input, select, textarea, iframe, button, iframe, [contentEditable=true]&quot;).not(&quot;[tabindex]&quot;).not(this.$instance.find(&quot;button&quot;)),this._$previouslyWithTabIndex=a(&quot;[tabindex]&quot;).not('[tabindex=&quot;-1&quot;]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(b,c){return a(c).attr(&quot;tabindex&quot;)}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr(&quot;tabindex&quot;,-1),document.activeElement.blur(),b(c)},afterClose:function(b,c){var d=b(c),e=this;return this._$previouslyTabbable.removeAttr(&quot;tabindex&quot;),this._$previouslyWithTabIndex.each(function(b,c){a(c).attr(&quot;tabindex&quot;,e._previousWithTabIndices[b])}),this._previouslyActive.focus(),d},onResize:function(a,b){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),a(b)},afterContent:function(a,b){var c=a(b);return this.$instance.find(&quot;[autofocus]:not([disabled])&quot;).focus(),this.onResize(b),c}}}),a.featherlight=b,a.fn.featherlight=function(a,c){return b.attach(this,a,c)},a(document).ready(function(){b._onReady()})}(jQuery);var webUrl=&quot;https://philips-optimization.atlassian.net&quot;;var apiUrl=webUrl+&quot;/rest/api/2&quot;;var createMeta;var newEpic;var storiesToClone;var epicNameField;var epicLinkField;function logAction(action){$(&quot;.featherlight-inner&quot;).append(&quot;&lt;br/&gt;&lt;span&gt;&quot;+action+&quot;&lt;/span&gt; &quot;);}function logSuccess(success){$(&quot;.featherlight-inner&quot;).append(&quot;&lt;span class='tool-success'&gt;&quot;+success+&quot;&lt;/span&gt;&quot;);}function logError(error){$(&quot;.featherlight-inner&quot;).append(&quot;&lt;span class='tool-error'&gt;&quot;+error+&quot;&lt;/span&gt;&quot;);}function loadCreateMeta(){return new Promise(function(resolve){$.ajax({url:apiUrl+&quot;/issue/createmeta?expand=projects.issuetypes.fields&quot;,type:'GET',dataType:'json'}).done(function(data){var project=data.projects.filter(function(project){return project.key==&quot;OP&quot;;}).pop();var meta=project.issuetypes.reduce(function(map,issueType){map[issueType.name]=issueType.fields;return map;},{});epicNameField=Object.keys(meta.Epic).filter(function(field){return meta.Epic[field].name==&quot;Epic Name&quot;;}).pop();epicLinkField=Object.keys(meta.Story).filter(function(field){return meta.Story[field].name==&quot;Epic Link&quot;;}).pop();resolve(meta);});});}function mapIssue(issue,meta){var metaFields=meta[issue.fields.issuetype.name];var mappedIssue={fields:{}};for(var field in metaFields){mappedIssue.fields[field]=issue.fields[field];};mappedIssue.fields.project={key:&quot;OP&quot;};delete mappedIssue.fields.attachment;if(typeof mappedIssue.fields.description!=&quot;undefined&quot;&amp;&amp;!mappedIssue.fields.description){mappedIssue.fields.description=&quot;&quot;;}return mappedIssue;}function cloneIssue(issue){return new Promise(function(resolve){var createIssue=mapIssue(issue,createMeta);$.ajax({url:apiUrl+&quot;/issue&quot;,type:'POST',dataType:'json',data:JSON.stringify(createIssue),contentType:&quot;application/json&quot;,}).done(function(data){console.log(&quot;issue created!&quot;,data);issue.id=data.id;issue.key=data.key;resolve(issue);}).error(function(data){logError(data.statusText);});});}function findEpicStories(epic){return new Promise(function(resolve){$.ajax({url:apiUrl+&quot;/search&quot;,data:{jql:&quot;'Epic Link' = &quot;+epic.key,fields:&quot;*all,-comment&quot;},type:'GET',dataType:'json'}).done(function(data){resolve(data.issues);});});}function cloneNextEpicStory(){return new Promise(function(resolve){var story=storiesToClone.shift();var newStory={fields:story.fields};newStory.fields[epicLinkField]=newEpic.key;logAction(&quot;cloning story&quot;);console.log(&quot;cloning story&quot;,newStory);cloneIssue(newStory).then(function(){logSuccess(&quot;done&quot;);if(storiesToClone.length){cloneNextEpicStory().then(function(){resolve();});}else{resolve();}});});}function findTemplateEpics(){return new Promise(function(resolve){$.ajax({url:apiUrl+&quot;/search&quot;,data:{jql:&quot;project = TEM AND issuetype = Epic&quot;,fields:&quot;*all,-comment&quot;},type:'GET',dataType:'json'}).done(function(data){var $ul=data.issues.reduce(function($ul,epic){var $li=$(&quot;&lt;li&gt;&lt;a href='#'&gt;&quot;+epic.fields.summary+&quot;&lt;/a&gt;&lt;/li&gt;&quot;);$li.on(&quot;click&quot;,function(){$(&quot;.featherlight-inner&quot;).html(&quot;&quot;);logAction(&quot;Cloning epic ...&quot;);newEpic={fields:epic.fields};newEpic.fields.summary=&quot;New Epic! &quot;+newEpic.fields.summary;newEpic.fields[epicNameField]=newEpic.fields.summary;cloneIssue(newEpic).then(function(){logSuccess(&quot;done&quot;);logAction(&quot;Loading epic issues ...&quot;);return findEpicStories(epic);}).then(function(stories){logSuccess(&quot;done&quot;);storiesToClone=stories;return cloneNextEpicStory();}).then(function(){logAction(&quot;redirecting to new epic ...&quot;);document.location=webUrl+&quot;/browse/&quot;+newEpic.key;});});$ul.append($li);return $ul;},$(&quot;&lt;ul&gt;&lt;/ul&gt;&quot;));resolve($ul);});});}var $content=$(&quot;&lt;p&gt;loading...&lt;/p&gt;&quot;);$.featherlight($content);loadCreateMeta(). then(function(meta){createMeta=meta;console.log(&quot;createMeta&quot;,meta);return findTemplateEpics();}). then(function($content){$(&quot;.featherlight-inner&quot;).html($content);$content.before(&quot;&lt;p&gt;Select epic to clone:&lt;/p&gt;&quot;);});})();">
    Create new JIRA Project
</a>

</body>


</html>